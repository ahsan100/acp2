<template name="studySchedule">
    <div class="container">
        <div class="row">
            {{> SingleQuestionnaireNav menuIdx="2"}}

            <div class="col-sm-9">
                <div class="page-header">
                    <h2>Scheduler</h2>
                </div>

                {{#autoForm collection="Studies" id="updateSchedule" type="update" doc=study}}

                    {{#afEachArrayItem name="scheduler"}}
                        <div class="panel panel-info">
                            <div class="panel-heading">
                                <h4>{{this.name}}</h4>
                            </div>
                            <div class="panel-body">

                                <h3>Select Questions for this Schedule</h3>
                                {{> afQuickField name=this.current.questionSchedule
                                        type ="select-checkbox-inline"
                                        template="bootstrap3-horizontal"
                                        input-col-class="col-sm-12"
                                        options=questionsCheckbox
                                }}

                                <h3>Select schedule method</h3>
                                {{> afQuickField name=this.current.scheduleCheck}}

                                {{#if afFieldValueIs name=this.current.scheduleCheck value="time"}}
                                    <h3>Hour</h3>
                                    {{> afQuickField name=this.current.hours
                                            template="bootstrap3-horizontal"
                                            input-col-class="col-sm-11"
                                    }}

                                    <h3>Weekday</h3>
                                    {{> afQuickField name=this.current.weekdays
                                            template="bootstrap3-horizontal"
                                            input-col-class="col-sm-11"
                                    }}
                                {{/if}}

                                {{#if afFieldValueIs name=this.current.scheduleCheck value="interval"}}
                                    <h3>Interval</h3>
                                    {{> afQuickField name=this.current.interval
                                            template="bootstrap3-horizontal"
                                            label-class="col-sm-2"
                                            input-col-class="col-sm-8"
                                            placeholder="Triggered every X minutes"
                                    }}
                                {{/if}}

                                <div class="btn-group mr-2" role="group" aria-label="First group">
                                    <button class="btn btn-danger btn-md autoform-remove-item" data-autoform-field="items">Remove Schedule</button>
                                </div>

                                <br>

                            </div>
                        </div>
                    {{/afEachArrayItem}}

                    <div>
                        <button class="btn btn-primary btn-md autoform-add-item" data-autoform-field="scheduler">Add Schedule</button>
                        <button class="btn btn-primary btn-md pull-right" type="submit">Next</button>
                    </div>
                    <br>
                
                {{/autoForm}}
            </div>
        </div>
    </div>
</template>